# Evolution CMS Installation Steps

check_docker:
  - command: docker --version
  - command: docker compose version
  - message: "Make sure Docker is installed and running"
  - user_prompt: "I will check if Docker is installed on your system..."

generate_docker_config:
  - command: php core/artisan salo:install
    message: "Generating docker-compose.yml file"
    user_prompt: "I will now generate the Docker configuration. When prompted, I'll select MySQL for you..."
    auto_input: "0"

deploy_docker:
  - user_prompt: "Starting Docker containers. This may take a few minutes..."
  - command: docker compose up -d
    message: "Starting Docker containers"

install_cms:
  - user_prompt: |
      Now I will help you install Evolution CMS.
      Please confirm or modify these installation parameters:
      
      Database Settings:
      - Type: mysql
      - Server: mysql
      - Database: evo
      - Username: homestead
      - Password: password
      - Table Prefix: evo_
      
      Admin Settings:
      - Login: admin
      - Email: admin@example.com
      - Password: admin123
      
      Other Settings:
      - Language: en
      - Remove Install: yes
      
      Type 'yes' to continue with these settings or provide your own:
  - command: docker compose exec evo.php php install/cli-install.php --typeInstall=1 --databaseType=mysql --databaseServer=mysql --database=evo --databaseUser=homestead --databasePassword=password --tablePrefix=evo_ --cmsAdmin=admin --cmsAdminEmail=admin@example.com --cmsPassword=admin123 --language=en --removeInstall=y
    message: "Installing Evolution CMS"

post_install:
  - command: docker compose exec evo.php php core/artisan package:create main
    message: "Creating main package"
  - command: docker compose exec evo.php bash -c 'echo "<?php return \"EvolutionCMS\\\Main\\\Controllers\\\\";" > core/custom/config/cms/settings/ControllerNamespace.php'
    message: "Configuring NameSpaces for controllers"
  - command: docker compose exec evo.php php core/artisan extras extras TinyMCE5 master
    message: "Installing TinyMCE5 plugin"
  - command: docker compose exec evo.php bash -c 'echo "<?php return \"TinyMCE5\";" > core/custom/config/cms/settings/which_editor.php'
    message: "Setting TinyMCE5 as default editor"

installation_complete:
  - user_prompt: |
      âœ… Installation completed successfully!
      
      You can now access:
      1. Evolution CMS: http://localhost
         Admin Panel: http://localhost/manager/
         - Login: admin
         - Password: admin123
      
      2. Database Management (Adminer): http://localhost:8080
         - Server: mysql
         - Username: homestead
         - Password: password
         - Database: evo
      
      To start working with Evolution CMS, open http://localhost in your browser.
      Need help? Type 'help' in the chat.

access_points:
  evolution_cms: "http://localhost"
  evolution_admin: "http://localhost/manager/"
  adminer:
    url: "http://localhost:8080"
    credentials:
      server: "mysql"
      username: "homestead"
      password: "password"
      database: "evo"

stop_containers:
  - command: docker compose down
    message: "Stop and remove containers"
  - user_prompt: "Stopping all containers..."

useful_commands:
  - command: docker compose logs
    message: "View container logs"
  - command: docker compose restart
    message: "Restart containers" 